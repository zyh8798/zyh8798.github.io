import{i as E,g as F,u as U,j as D,a as W,b as M,d as O,c as H,k as G,h as J,e as Q,f as X}from"./app.CNWqKRbt.js";import{_ as Z}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.JFCXHXl8.js";import{a as I,u as ee}from"./chunks/vue-router.BeoKCBYL.js";import"./chunks/dayjs.DRNXKsfK.js";import{f as b,c as k,M as z,N as C,P as s,u as i,O as o,F as x,R as L,a3 as u,S as m,V as $,r as Y,d as te,y as r,a2 as S,$ as A,a7 as ae}from"./framework.Dx7sWfGO.js";import{u as R}from"./chunks/vue-i18n.DkuPcPq6.js";import{u as ne,a as oe}from"./animation.Mf_6dpx-.js";import{_ as re}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.Dj-KAjq-.js";import"./chunks/pinia.DY82CtBG.js";import"./chunks/@vueuse/motion.D5qxDnDe.js";import"./chunks/nprogress.Y9-A6VbA.js";import"./index.BRXJGymZ.js";const le={font:"serif black"},se=b({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(e){const{locale:l}=R();function g(t){const n=l.value==="zh-CN"?"zh":l.value;return t[`title_${n}`]?t[`title_${n}`]:t.title}const a=I(),f=k(()=>{const t=a.query.category||"";return Array.isArray(t)?[t]:t.split("/")});return(t,n)=>{const y=B,d=z("RouterLink");return i(E)(e.categoryItem)?(o(),C(y,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${e.categoryItem.name}`:e.categoryItem.name,category:e.categoryItem,collapsable:!f.value.includes(e.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(o(),s(x,{key:1},[e.categoryItem.title?(o(),C(d,{key:0,to:e.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:u(()=>[n[0]||(n[0]=m("div",{"i-ri-file-text-line":""},null,-1)),m("span",le,$(g(e.categoryItem)),1)]),_:1},8,["to"])):L("v-if",!0)],64))}}}),ce={key:0,"i-ri-folder-add-line":""},ie={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},ue={class:"rounded-full px-1.5 bg-black/5 shadow-sm op-60",text:"xs"},me={key:0},B=b({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(e){const l=e,g=ee(),a=Y(l.collapsable),{t:f}=R(),t=Y(),{show:n}=ne(t);function y(p){a.value=!1,g.push({query:{category:p}}),n()}te(()=>{const p=document.querySelector(".post-collapse-container");p&&(t.value=p)});const d=Y();return l.level===1&&oe(d,{i:l.i||0,y:20,duration:200}),(p,v)=>{const c=se;return o(),s(x,null,[m("li",{ref_key:"categoryRef",ref:d,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[m("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:v[0]||(v[0]=_=>a.value=!a.value)},[a.value?(o(),s("div",ce)):(o(),s("div",ie))]),m("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:v[1]||(v[1]=_=>y(e.parentKey))},[m("span",null,$(e.category.name==="Uncategorized"?i(f)("category.uncategorized"):e.category.name),1),m("span",ue,$(e.category.total),1)])],512),r(S,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:u(()=>[a.value?L("v-if",!0):(o(),s("ul",me,[(o(!0),s(x,null,A(e.category.children.values(),(_,h)=>(o(),s("li",{key:h,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[r(c,{i:h,"category-item":_,"parent-key":e.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),ge={flex:"~ col"},ye=b({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(e){const l=I(),g=k(()=>{const a=l.query.category||"";return Array.isArray(a)?[a]:a.split("/")});return(a,f)=>{const t=B;return o(),s("div",ge,[(o(!0),s(x,null,A(e.categories.values(),(n,y)=>(o(),s("ul",{key:n.name,class:"category-list"},[r(t,{i:y,"parent-key":n.name,category:n,level:e.level+1,collapsable:!g.value.includes(n.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),pe={text:"center",class:"yun-text-light",p:"2"},Le=b({__name:"categories",setup(e){const{t:l}=R(),g=F(),a=U(),f=I(),t=k(()=>f.query.category||""),n=D(),y=k(()=>(a.value.icon||(a.value.icon="i-ri-folder-2-line"),a.value.icon)),d=k(()=>g.postList.filter(c=>c.categories&&t.value!=="Uncategorized"?typeof c.categories=="string"?c.categories===t.value:c.categories.join("/").startsWith(t.value)&&c.categories[0]===t.value.split("/")[0]:!c.categories&&t.value==="Uncategorized"?c.categories===void 0:!1)),p=W(a);return M([O({"@type":"CollectionPage"})]),(v,c)=>{const _=H,h=re,K=ye,w=z("RouterView"),P=Z,V=G,q=J,N=Q,T=X;return o(),s(x,null,[r(N,null,{default:u(()=>[r(_),r(w,null,{default:u(({Component:j})=>[(o(),C(ae(j),null,{"main-header":u(()=>[r(h,{title:i(p)||i(l)("menu.categories"),icon:y.value,color:i(a).color,"page-title-class":i(a).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":u(()=>[r(S,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:u(()=>[m("div",pe,$(i(l)("counter.categories",Array.from(i(n).children).length)),1)]),_:1}),r(K,{categories:i(n).children},null,8,["categories"]),r(w)]),"main-nav-before":u(()=>[t.value?(o(),C(V,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:u(()=>[r(h,{m:"t-10",title:t.value==="Uncategorized"?i(l)("category.uncategorized"):t.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),r(P,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:d.value},null,8,["posts"])]),_:1})):L("v-if",!0)]),_:1}))]),_:1}),r(q)]),_:1}),r(T)],64)}}});export{Le as default};
